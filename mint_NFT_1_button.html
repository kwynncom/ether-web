<!DOCTYPE html>
<html lang='en'>
<head>
<meta http-equiv='Content-Type' content='text/html; charset=UTF-8'    />
<meta name='viewport' content='width=device-width, initial-scale=1.0' />

<title>NFT mint with one button</title>

<script> // CONFIG HERE ******************
    var myNFTConfig = {
        to    : '0x8ca86d22241C3458441E286Fa0062023988c1E61', // contract address
        data  : '0x755edd170000000000000000000000009beb87e50dbb3f1356c9b8d72a5f08c794d3b95f', // ABI for the EVM  
        value : '0x11c37937e080000', // 0x11c37937e080000 === 0.08 ETH in hex Wei
    }; // CONFIG HERE ********************
</script>

<script src='/opt/js/web3/web3.min.js'></script>
<script>
async function mint() {
    
    if (!ethereum.selectedAddress) await ethereum.request({ method: 'eth_requestAccounts' });

    const custAddr = ethereum.selectedAddress;
    const rargs = myNFTConfig;
    rargs.from = rargs.recipient = custAddr;

    ethereum.request({
      method: 'eth_sendTransaction',
      params: [rargs],
    }).then((txHash) => console.log(txHash))
      .catch((error) => console.error);
}
</script>
</head>
<body>
<div>
    <div style='margin-bottom: 2ex; margin-top: 1.5ex; '>
        <button onclick='mint();' style='font-size: 120%;'>Connect to MetaMask and mint an NFT for 0.08 ETH.</button>
    </div>
</div>

<p>See the <a href='https://rinkeby.etherscan.io/address/0x8ca86d22241C3458441E286Fa0062023988c1E61'>transactions on EtherScan</a>.</p>

<p>Under some conditions, it helps to <button onclick="location.reload();">refresh the page</button>.  I don't think this will be a problem in the 
    real world.  I think it's a caching issue when you return to the page after 18+ hours and don't hard refresh.  I suppose I could write a 
    timer to account for this, but let's see how testing goes.
    
</p>
    
<p>I won't give as dire a warning about this being test-only because I don't suppose anyone is going to mint random NFTs, especially for 
    0.08 of real ETH.</p>

<p>This version has been replaced by <a href='mint_NFT_2_button.html'>another 2 button version</a> plus improvements.
    
</p>

<p><a href='ether.html'>My main doc page</a> 
    <span style='padding-left: 3ex;'><a href='https://github.com/kwynncom/ether-web'>GitHub repo with this code</a></span>
</p>

</body>
</html>
